#!/bin/sh

usage () { cat <<USAGE; }
usage: $(basename -- "$0" | sed 's/-/ /1') [-d default=SAMPSHELL_GIT_DEFAULT_MASTER_BRANCH]

Shows the current 'master' branc.
USAGE

# No arguments are allowed
default=${SAMPSHELL_GIT_DEFAULT_MASTER_BRANCH-master}
while getopts 'd:' opt; do
	case $opt in
		d) default=$OPTARG ;;
		h) usage; exit ;;
		*) exit 2 ;; # I.e. usage error
	esac
done

shift $(( OPTIND - 1 ))

if [ "$#" -ne 0 ]; then
	usage >&1
	exit 2
fi

basename "$(git symbolic-ref refs/remotes/origin/HEAD -q || echo "$default")"
