#!/usr/bin/awk -f

max < ++counts[$0] {
  max = counts[$0]
}

END {
  fmt = "%" length(max) "d %s\n"

  for (line in counts) {
    printf fmt, counts[line], line | "sort"
  }
}
