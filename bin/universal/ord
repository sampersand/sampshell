#!/bin/sh
exec ruby -Sx -nlaF'\K' -rg -rscript -- "$0" "$@"
#!ruby

BEGIN{
  GLOBALS.expect! %w[h help d b f]
  $h || $_help and exit <<-EOS
usage: #$program_name [-h] [-d | -b=num] [-f] [args...]
options:
  -d same as `-b=10`
  -b interpret args in base num, instead of the default 16
  -f interpret args as files
Prints the base-n ascii representation of its arguments, one line per arg.
If no args are given, defaults to stdin.
  EOS

  BASE = $b || ($d ? 10 : 16)

  unless $*.empty? or $f then
    $temp = %x<mktemp>.chop
    trap 0, 'File::delete $temp'
    open($temp, 'w') { _1.puts $* }
    $*.replace [$temp]
  end
}

puts $F.map{sprintf "%02s", _1.ord.to_s(BASE)} * ' '
