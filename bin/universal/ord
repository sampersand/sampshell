#!/bin/sh
exec ruby -Sx -nlaF'\K' -rg -rscript -- "$0" "$@"
#!ruby

BEGIN{
  GLOBALS.expect! %w[h help d decimal b base f files]
  $h || $_help and exit <<-EOS
usage: #$program_name [-d | -b num] [-f] [args...]
options:
  -d, --decimal same as `-b=10`
  -b, --base    interpret args in base num, instead of the default 16
  -f, --files   interpret args as files
Prints the base-n unicode representation of its arguments, one line per arg.
If no args are given, defaults to stdin.
  EOS

  BASE = ($b || $base) || ($d || $decimal ? 10 : 16)

  unless $*.empty? or $f || $files then
    $temp = %x<mktemp>.chop
    END { File::delete $temp }
    open($temp, 'w') { _1.puts $* }
    $*.replace [$temp]
  end
}

puts $F.map{sprintf "%02s", _1.ord.to_s(BASE)} * ' '
