#!/bin/sh
exec ruby -x -aF'\K' -Snlrg -- "$0" "$@"
#!ruby

BEGIN{
$h || $_help and (puts <<EOS; exit)
usage: #{File.basename $0} [-h] [-d | -b=num] [-f] [args...]
options:
  -d same as `-b=10`
  -b interpret args in base num, instead of the default 16
  -f interpret args as files
Prints the base-n ascii representation of its arguments, one line per arg.
If no args are given, defaults to stdin.
EOS

BASE = $b || ($d && 10) || 16

if !$*.empty? and !$f
  $file = `mktemp`.chop
  File.write $file, $*.join("\n")
  trap 'EXIT', 'File.unlink $file'
  $*.replace [$file]
end
}

puts $F.map{"%02s" % _1.ord.to_s(BASE)} * ' '
